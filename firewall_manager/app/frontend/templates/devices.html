<div class="container is-fluid">
  <h1 class="title is-5 mb-4">장비관리</h1>
  
  <!-- 장비 그리드 -->
  <div class="box">
    <!-- 그리드 툴바 -->
    <div class="level is-mobile mb-4">
      <div class="level-left">
        <div class="level-item">
          <div class="buttons">
            <button class="button is-small" id="btn-add">장비 추가</button>
            <button class="button is-small" id="btn-edit">수정</button>
            <button class="button is-danger is-small" id="btn-delete">삭제</button>
            <button class="button is-success is-small" id="btn-sync">동기화</button>
            <button class="button is-small" id="btn-download-template">엑셀 서식 다운로드</button>
            <div class="file is-small">
              <label class="file-label">
                <input class="file-input" type="file" id="file-upload" accept=".xlsx,.xls" />
                <span class="file-cta">
                  <span class="file-label">엑셀 일괄 등록</span>
                </span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="level-right">
        <div class="level-item">
          <div class="field">
            <div class="control">
              <input class="input is-small" id="devices-search" type="text" placeholder="검색..." />
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 메시지 컨테이너 -->
    <div id="devices-message-container"></div>
    <!-- 그리드 -->
    <div id="devices-grid" class="ag-theme-quartz"></div>
  </div>

  <!-- Bulma modal for create/update device -->
  <div class="modal" id="modal-device">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">장비</p>
        <button class="delete" aria-label="close" id="close-device"></button>
      </header>
      <section class="modal-card-body">
        <form id="device-form">
          <div class="columns is-multiline">
            <!-- 1행: 이름 | IP 주소 -->
            <div class="column is-6">
              <div class="field">
                <label class="label">이름 <span class="has-text-danger">*</span></label>
                <div class="control">
                  <input class="input is-small" name="name" required />
                </div>
              </div>
            </div>
            <div class="column is-6">
              <div class="field">
                <label class="label">IP 주소 <span class="has-text-danger">*</span></label>
                <div class="control">
                  <input class="input is-small" name="ip_address" required />
                </div>
              </div>
            </div>
            
            <!-- 2행: HA Peer IP | 벤더 -->
            <div class="column is-6">
              <div class="field">
                <label class="label">HA Peer IP <span class="has-text-grey is-size-7">(선택)</span></label>
                <div class="control">
                  <input class="input is-small" name="ha_peer_ip" />
                </div>
              </div>
            </div>
            <div class="column is-6">
              <div class="field">
                <label class="label">벤더 <span class="has-text-danger">*</span></label>
                <div class="control select is-fullwidth is-small">
                  <select name="vendor" id="vendor-select" required></select>
                </div>
              </div>
            </div>
            
            <!-- 3행: 모델 | OS 버전 -->
            <div class="column is-6">
              <div class="field">
                <label class="label">모델 <span class="has-text-grey is-size-7">(선택)</span></label>
                <div class="control">
                  <input class="input is-small" name="model" />
                </div>
              </div>
            </div>
            <div class="column is-6">
              <div class="field">
                <label class="label">OS 버전 <span class="has-text-grey is-size-7">(선택)</span></label>
                <div class="control">
                  <input class="input is-small" name="os_version" />
                </div>
              </div>
            </div>
            
            <!-- 4행: 사용자명 | (빈 공간) -->
            <div class="column is-6">
              <div class="field">
                <label class="label">사용자명 <span class="has-text-danger">*</span></label>
                <div class="control">
                  <input class="input is-small" name="username" required />
                </div>
              </div>
            </div>
            <div class="column is-6">
              <!-- 빈 공간 -->
            </div>
            
            <!-- 5행: 비밀번호 | 비밀번호 확인 -->
            <div class="column is-6">
              <div class="field">
                <label class="label">비밀번호 <span class="has-text-danger">*</span></label>
                <div class="control">
                  <input class="input is-small" type="password" name="password" id="password-input" />
                </div>
                <p class="help">수정 시 비워두면 비밀번호는 변경되지 않습니다.</p>
              </div>
            </div>
            <div class="column is-6">
              <div class="field">
                <label class="label">비밀번호 확인 <span class="has-text-danger">*</span></label>
                <div class="control">
                  <input class="input is-small" type="password" name="password_confirm" />
                </div>
              </div>
            </div>
            
            <!-- 6행: 설명 (전체 너비) -->
            <div class="column is-12">
              <div class="field">
                <label class="label">설명 <span class="has-text-grey is-size-7">(선택)</span></label>
                <div class="control">
                  <textarea class="textarea is-small" name="description"></textarea>
                </div>
              </div>
            </div>
            
            <!-- 7행: 체크박스 -->
            <div class="column is-12">
              <div class="field">
                <div class="control">
                  <label class="checkbox" style="font-size: 0.875rem; font-weight: normal;">
                    <input type="checkbox" name="use_ssh_for_last_hit_date">
                    <span style="margin-left: 0.5rem;">마지막 매칭일시 SSH로 수집하기 <span class="has-text-grey is-size-7">(선택)</span></span>
                  </label>
                </div>
              </div>
            </div>
          </div>
          <p class="help is-danger is-hidden" id="form-error"></p>
        </form>
      </section>
      <footer class="modal-card-foot">
        <button class="button is-primary is-small" id="submit-device">저장</button>
        <button class="button is-light is-small" id="cancel-device">취소</button>
      </footer>
    </div>
  </div>

  <!-- Small unified confirm modal -->
  <div class="modal is-compact" id="modal-confirm">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title" id="confirm-title">확인</p>
        <button class="delete" aria-label="close" id="confirm-close"></button>
      </header>
      <section class="modal-card-body">
        <p id="confirm-message">이 작업을 진행하시겠습니까?</p>
      </section>
      <footer class="modal-card-foot is-justify-content-flex-end">
        <button class="button is-light is-small" id="confirm-cancel">취소</button>
        <button class="button is-primary is-small" id="confirm-ok">확인</button>
      </footer>
    </div>
  </div>

  <!-- Small unified alert modal -->
  <div class="modal is-compact" id="modal-alert">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title" id="alert-title">알림</p>
        <button class="delete" aria-label="close" id="alert-close"></button>
      </header>
      <section class="modal-card-body">
        <p id="alert-message">메시지</p>
      </section>
      <footer class="modal-card-foot is-justify-content-flex-end">
        <button class="button is-primary is-small" id="alert-ok">확인</button>
      </footer>
    </div>
  </div>
</div>
